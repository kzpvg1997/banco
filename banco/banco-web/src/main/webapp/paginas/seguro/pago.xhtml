

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="/template/template.xhtml">

	<ui:define name="cuerpo">

		<h:form prependId="false">

			<p:panelGrid id="paneldatosbusqueda" columns="3">

				<p:outputLabel for="tftipoD" id="lblid" value="#{msj['pago.combTipoDocumento']}:" />
				<h:selectOneMenu id="tftipoD"
					value="#{pagoController.combTipoDocumento}">
					<f:selectItem itemValue="Null" itemLabel="Seleccione..." />
					<f:selectItem itemValue="C.C" itemLabel="C.C" />
					<f:selectItem itemValue="R.C" itemLabel="R.C" />
					<f:selectItem itemValue="T.I" itemLabel="T.I" />
				</h:selectOneMenu>
				<p:message for="tftipoD" />

				<p:outputLabel for="tfnumero" id="numDoc" value="#{msj['pago.numeroDocumento']}:" />
				<p:inputText id="tfnumero" value="#{pagoController.numeroDocumento}" />
				<p:message for="tfnumero" />

				<p:outputLabel for="btnbuscar" id="btn" value="#{msj['pago.busqueda']}:" />
				<p:commandButton id="btnbuscar" value="#{msj['pago.buscar']}"
					process="@this tftipoD tfnumero cbcuen cbtar"
					update="tablaDoc paneldatosbusqueda pagoTotal"
					action="#{pagoController.buscarConsumos}" />
				<p:message for="tftipoD" />


				<h:outputLabel for="cbtar" id="lbltarjeta" value="#{msj['pago.combTarjeta']}:" />
				<p:selectOneMenu id="cbtar"
					value="#{pagoController.tarjetaSeleccionada}">
					<f:selectItem itemValue="Null" itemLabel="Seleccione..." />
					<f:selectItems value="#{pagoController.tarjetas}" var="tarjeta"
						itemValue="#{tarjeta}" itemLabel="#{tarjeta.number}" />

					<f:ajax event="change" execute="@this cbtar"
						render="tablaDoc paneldatosbusqueda"
						listener="#{pagoController.cargarTablaCombo}" />
				</p:selectOneMenu>
			</p:panelGrid>
			
			
			<p:dataTable id="tablaDoc" value="#{pagoController.consumos}"
				var="con" border="1">
				<p:column>
					<f:facet name="header">
							Identificacion
						</f:facet>
					<p:outputLabel value="#{con.id}" />
				</p:column>
				<p:column>
					<f:facet name="header">
							Fecha
						</f:facet>
					<p:outputLabel value="#{con.dateConsume}" />
				</p:column>
				<p:column>
					<f:facet name="header">
							Valor
						</f:facet>
					<p:outputLabel value="#{con.ammount}" />
				</p:column>
				<p:column>
					<f:facet name="header">
							NÂ° Cuotas
						</f:facet>
					<p:outputLabel value="#{con.numberShares}" />
				</p:column>

				<p:column headerText="Pago">
					<p:commandButton action="#" process="@this" value="Pagar"
						update="tablaDoc" />
				</p:column>
			</p:dataTable>
			

			<br></br>
			<br></br>
			

			<p:panelGrid id="pagoTotal" columns="3">

				<h:outputLabel for="cbcuen" id="lblcuenta" value="#{msj['pago.cuentas']}:" />
				<h:selectOneMenu id="cbcuen"
					value="#{pagoController.cuentaSeleccionada}">
					<f:selectItem itemValue="Null" itemLabel="Seleccione..." />
					<f:selectItems value="#{pagoController.cuentas}" var="cuentas"
						itemValue="#{cuentas}" itemLabel="#{cuentas.number}" />
				</h:selectOneMenu>

				<p:commandButton id="btnpagar" value="#{msj['pago.pagar']}"
					action="#{pagoController.pagar}" />
			</p:panelGrid>


		</h:form>

	</ui:define>
</ui:composition>